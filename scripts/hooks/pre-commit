#!/bin/sh
# Prevent direct commits to main — use feature branches + PRs

branch=$(git symbolic-ref --short HEAD 2>/dev/null)

if [ "$branch" = "main" ]; then
  echo ""
  echo "ERROR: Direct commits to 'main' are not allowed."
  echo ""
  echo "Use a feature branch with the correct prefix:"
  echo "  feature/  — new functionality"
  echo "  fix/      — bug fixes"
  echo "  chore/    — maintenance, CI, deps"
  echo "  release/  — version bumps, changelog"
  echo "  hotfix/   — urgent production fixes"
  echo ""
  echo "Example: git checkout -b fix/dwd-timeout"
  echo ""
  exit 1
fi
